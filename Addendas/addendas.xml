<!-- Addenda Chedraui -->

<?xml version="1.0"?>
<template name="Addenda Chedraui" t-name="add.addenda_chedarui01">
  <Addenda>
    <Documento>
      <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
      <numeroOrden t-field="record.field_sales.number_order" />
      <fechaPedidoCliente t-field="record.date_invoice" />
    </Documento>
  </Addenda>
</template>

<!-- Addenda Walmart -->

<?xml version="1.0"?>
<template name="Addenda Walmart" t-name="add.addenda_walmart01">
  <Addenda>
    <Documento>
      <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
      <numeroOrden t-field="record.field_sales.number_order" />
      <fechaPedidoCliente t-field="record.date_invoice" />
    </Documento>
  </Addenda>
</template>

<!-- Addenda Soriana (Factura normal) -->

<?xml version="1.0"?>
<template name="Addenda Soriana (Factura normal)" t-name="add.addenda_sorianaFN01">
  <Addenda>
    <Documento>
      <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
      <numeroOrden t-field="record.field_sales.number_order" />
      <citaSoriana t-field="record.field_sales.number_appoi" />
    </Documento>
  </Addenda>
</template>

<!-- Addenda Soriana (Factura extemporanea) -->

<?xml version="1.0"?>
<template name="Addenda Chedraui" t-name="add.addenda_soriana01">
  <Addenda>
    <Documento>
      <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
      <numeroOrden t-field="record.field_sales.number_order" />
      <citaSoriana t-field="record.field_sales.number_appoi" />
      <folioNotaEntrada t-field="record.field_sales.folio_note_entry" />
    </Documento>
  </Addenda>
</template>

<!-- Addenda SuperPrecio -->

<?xml version="1.0"?>
<template name="Addenda SuperPrecio" t-name="add.addenda_superprecio01">
  <Addenda>
    <Documento>
      <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
      <numeroOrden t-field="record.field_sales.number_order" />
      <fechaPedidoCliente t-field="record.date_invoice" />
      <camppAddic t-field="record.field_sales.field_add_capture" />
    </Documento>
  </Addenda>
</template>


<!-- Addenda Farmacia Guadalajara -->

<?xml version="1.0"?>
<template name="Addenda Farmacia Guadalajara" t-name="add.addenda_farmaciaG01">
  <Addenda>
    <Documento>
      <numeroOrden t-field="record.field_sales.number_order" />
    </Documento>
  </Addenda>
</template>

<!-- Addenda San Francisco de Asis -->

<?xml version="1.0"?>
<template name="Addenda San Francisco de Asis" t-name="add.addenda_sanfranciscoDA01">
  <Addenda>
    <Documento>
      <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
      <numeroOrden t-field="record.field_sales.number_order" />
      <fechaPedidoCliente t-field="record.date_invoice" />
      <folioReciboMercancia>0</folioReciboMercancia>
      <fechaFolioReciboMercancia t-field="record.date_invoice" />
    </Documento>
  </Addenda>
</template>


<!-- Addenda Tiendas Tres B -->

<?xml version="1.0"?>
<template name="Addenda Tiendas Tres B" t-name="add.addenda_tiendas3B01">
  <Addenda>
    <Documento>
      <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
      <numeroOrden t-field="record.field_sales.number_order" />
      <numeroTienda t-field="record.partner_id.number_store" />
    </Documento>
  </Addenda>
</template>


<!-- Addenda 7/24 -->

<?xml version="1.0"?>
<template name="Addenda 7 / 24" t-name="add.addenda_7/24_01">
  <Addenda>
    <Documento>
      <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
      <numeroOrden t-field="record.field_sales.number_order" />
    </Documento>
  </Addenda>
</template>

<!-- Addenda Proveedora del panadero -->

<?xml version="1.0"?>
<template name="Addenda 7 / 24" t-name="add.addenda_7/24_01">
  <Addenda>
    <Documento>
      <fechaEntregaRequerida t-field="record.date_invoice" />
      <numeroOrden t-field="record.field_sales.number_order" />
      <numeroTienda t-field="record.partner_id.number_store" />
    </Documento>
  </Addenda>
</template>

<!-- Addenda Pruebas -->

<?xml version="1.0"?>

<ap tipoComprobante="FE" plazoPago="90 dias" observaciones="Ninguna">
  
</ap>

<!-- Addenda SuperPrecio(ORG) -->

<?xml version="1.0"?>
<template name="Addenda SuperPrecio" t-name="add.addenda_superprecio01">
  <Addenda>
    <Documento>
      <tipoComprobante>FE</tipoComprobante>
      <plazoPago t-field="record.field_sales.payment_term_id" />
      <t t-if="record.field_sales.note == ''">
        <observaciones>NINGUNA</observaciones>
      </t>
      <t t-else="">
        <observaciones t-field="record.field_sales.note" />
      </t>
      <Detalle>
        <folio t-field="record.reference" />
        <t t-foreach="record.field_sales.order_line" t-as="rec">
          <Producto>
            <codigoBarras t-esc="rec.product_id.barcode" />
            <cajasEntregadas t-esc="rec.product_uom_qty" />
            <precioUnitarioCaja t-esc="rec.price_unit" />
            <t t-set="piez_ent" t-value="rec.product_id.uom_id.factor * rec.product_uom_qty" />
            <piezasEntregadas t-esc="piez_ent" />
            <t t-set="oper1" t-value="rec.price_unit * rec.product_uom_qty" />
            <t t-set="oper2" t-value="oper1 / piez_ent" />
            <precioUnitarioPieza t-esc="oper2" />
            <Impuestos>
              <t t-set="cont" t-value="0" />
              <t t-foreach="rec.tax_id"  t-as="tc">
                <t t-foreach="tc.tag_ids" t-as="tg">
                  <t t-if="record.partner_id.most_ieps == False">
                    <t t-if="tg.name != 'IEPS'">
                      <t t-set="resultimp" t-value="rec.price_unit" />
                      <t t-set="resoperimp" t-value="resultimp * (tc.amount / 100)"  />
                      <t t-set="cont" t-value="cont + resoperimp"  />
                    </t>
                  </t>
                  <t t-else="">
                    <t t-set="resultimp" t-value="rec.price_unit" />
                    <t t-set="resoperimp" t-value="resultimp * (tc.amount / 100)"  />
                    <t t-set="cont" t-value="cont + resoperimp"  />
                  </t>
                </t>
              </t>
              <totalImouestosTrasladados t-esc="cont" />
              <Traslados>
                <t t-foreach="rec.tax_id" t-as="tac">
                  <t t-foreach="tac.tag_ids" t-as="tag">
                    <t t-set="resultimpuest" t-value="rec.price_unit" />
                    <t t-if="record.partner_id.most_ieps == False" >
                      <t t-if="tag.name != 'IEPS'" >
                        <Traslado>
                          <impuesto t-esc="tag.name" />
                          <tasa t-esc="tac.amount" />
                          <importe t-esc="resultimpuest * (tac.amount / 100)" />
                        </Traslado>
                      </t>
                    </t>
                    <t t-else="">
                      <Traslado>
                        <impuesto t-esc="tag.name" />
                        <tasa t-esc="tac.amount" />
                        <importe t-esc="resultimpuest * (tac.amount / 100)" />
                      </Traslado>
                    </t>
                  </t>
                </t>
              </Traslados>
            </Impuestos>
          </Producto>
        </t>
        <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
        <numeroOrden t-field="record.field_sales.number_order" />
        <fechaPedidoCliente t-field="record.date_invoice" />
        <camppAddic t-field="record.field_sales.field_add_capture" />
      </Detalle>
    </Documento>
  </Addenda>
</template>

<?xml version="1.0"?>
<template name="Addenda Farmacia Guadalajara" t-name="add.addenda_farmaciaG01">
  <Addenda>
    <t t-set="xml" t-value="record.l10n_mx_edi_get_xml_etree()"/>
    <requestForPayment type="SimpleInvoiceType" contentVersion="1.3.1" documentStructureVersion="AMC006" documentStatus="ORIGINAL">
      <requestForPaymentIdentification>
        <entityType>INVOICE</entityType>
        <uniqueCreatorIdentification>
          <serie t-esc="xml.get('Serie')" />
          <folio t-esc="xml.get('Folio')" />
        </uniqueCreatorIdentification>
      </requestForPaymentIdentification>
      <orderIdentification>
        <referenceIdentification type="ON" t-field="record.field_sales.number_order" />
      </orderIdentification>
      <buyer>
        <gln t-field="record.partner_id.gln" />
      </buyer>
      <seller>
        <alternatePartyIdentification type="SELLER_ASSIGNED_IDENTIFIER_FOR_A_PARTY">
          <numberProveedor>9999</numberProveedor>
        </alternatePartyIdentification>
      </seller>
      <shipTo>
        <alternatePartyIdentification type="ASSIGNED_IDENTIFIER_FOR_A_BUYER">
          <identification t-field="record.partner_id.type_suc"/>
          <number t-field="record.partner_id.number_sucursal"/>
          <!-- <identificationNumber t-field="record.partner_id.format_suc" /> -->
        </alternatePartyIdentification>
      </shipTo>
      <currency>
        <currencyISOCode t-field="record.currency_id.name" />
      </currency>
      <t t-set="cont" t-value="0" />
      <t t-foreach="record.field_sales.order_line" t-as="rec" >
        <t t-set="cont" t-value="cont + 1" />
        <lineItem>
          <type>SimpleInvoiceLineItemType</type>
          <number t-esc="cont" />
          <tradeItemIdentification>
            <gtin t-esc="rec.product_id.barcode" />
          </tradeItemIdentification>
          <tradeItemDescriptionInformation>
            <language>ES</language>
            <longText t-esc="rec.product_id.name" />
          </tradeItemDescriptionInformation>
          <invoicedQuantity>
            <unitOfMeasure t-esc="rec.product_uom.name" />
            <quantity t-esc="rec.product_uom_qty" />
          </invoicedQuantity>
          <grossPrice>
            <amount t-esc="rec.price_unit" />
          </grossPrice>
          <netPrice>
            <t t-set="pricenet" t-value="rec.price_unit" />
            <t t-foreach="rec.tax_id" t-as="tc" >
              <t t-foreach="tc.tag_ids" t-as="tg" >
                <t t-if="tg.name != 'IEPS'" >
                  <t t-set="result" t-value="rec.price_unit" />
                  <t t-set="resultoper" t-value="result * (tc.amount / 100)" />
                  <t t-set="pricenet" t-value="pricenet + resultoper" />
                </t>
              </t>
            </t>
            <amount t-esc="pricenet"  />
          </netPrice>
            <t t-set="amount" t-value="0" />
            <t t-foreach="rec.tax_id" t-as="tac" >
              <t t-foreach="tac.tag_ids" t-as="tag" >
                <t t-if="record.partner_id.most_ieps == False">
                  <t t-if="tag.name != 'IEPS'">
                    <t t-set="result" t-value="rec.price_unit" />
                    <t t-set="resultoper" t-value="result * (tac.amount / 100)" />
                    <t t-set="amount" t-value="amount + resultoper" />
                    <tradeItemTaxInformation>
                      <taxTypeDescription>VAT</taxTypeDescription>
                      <tradeItemTaxAmount>
                        <taxPercentaje t-esc="tac.amount" />
                        <taxAmount t-esc="amount" />
                      </tradeItemTaxAmount>
                    </tradeItemTaxInformation>
                  </t>
                </t>
                <t t-else="">
                  <t t-if="tag.name != 'IEPS'">
                    <t t-set="result" t-value="rec.price_unit" />
                    <t t-set="resultoper" t-value="result * (tac.amount / 100)" />
                    <t t-set="amount" t-value="amount + resultoper" />
                    <tradeItemTaxInformation>
                      <taxTypeDescription>VAT</taxTypeDescription>
                      <tradeItemTaxAmount>
                        <taxPercentaje t-esc="tac.amount" />
                        <taxAmount t-esc="amount" />
                      </tradeItemTaxAmount>
                    </tradeItemTaxInformation>
                  </t>
                  <t t-else="">
                    <tradeItemTaxInformation>
                      <taxTypeDescription>IEPS</taxTypeDescription>
                      <tradeItemTaxAmount>
                        <taxAmount t-esc="tac.amount" />
                      </tradeItemTaxAmount>
                    </tradeItemTaxInformation>
                  </t>
                </t>
              </t>
            </t>
            <totalLineAmount>
              <netAmount>
                <amount t-esc="rec.price_unit * rec.product_uom_qty" />
              </netAmount>
            </totalLineAmount>
        </lineItem>
      </t>
    </requestForPayment>
  </Addenda>
</template>

<?xml version="1.0"?>
<template name="Addenda 7 / 24" t-name="add.addenda_7/24_01">
  <Addenda>
    <Documento>
      <referencia t-field="record.reference" />
      <!--<fechadeEntrega t-field="record.field_sales.confirmation_date" t-field-options="{&quot;format&quot;: &quot;dd/MM/yy&quot;}" />-->
      <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
      <numeroOrden t-field="record.field_sales.number_order" />
    </Documento>
  </Addenda>
</template>

<?xml version="1.0"?>
<template name="Addenda TiendasTresB" t-name="add.addenda_tiendasTresB">
  <Addenda>
    <Documento>
      <seller>
        <alternatePartyIdentification>
          <type>SELLER_ASSIGNED_IDENTIFIER_FOR_A_PARTY</type>
        </alternatePartyIdentification>
      </seller>
      <shipTo>
        <alternatePartyIdentification>
          <number t-field="record.partner_id.number_sucursal"/>
          <nameAndAddress>
            <name t-field="record.partner_id.name" />
            <streetAddressOne t-field="record.partner_id.street" />
            <city t-field="record.partner_id.city"/>
            <postalCode t-field="record.partner_id.zip"/>
          </nameAndAddress>
        </alternatePartyIdentification>
      </shipTo>
      <currency>
        <currencyISOCode t-field="record.currency_id.name" />
      </currency>
      <t t-set="cont" t-value="0" />
      <t t-foreach="record.field_sales.order_line" t-as="rec" >
        <t t-set="cont" t-value="cont + 1" />
        <lineItem>
          <type>SimpleInvoiceLineItemType</type>
          <number t-esc="cont" />
          <tradeItemIdentification>
            <gtin t-esc="rec.product_id.barcode" />
          </tradeItemIdentification>
          <tradeItemDescriptionInformation>
            <language>ES</language>
            <longText t-esc="rec.product_id.name" />
          </tradeItemDescriptionInformation>
          <invoicedQuantity>
            <unitOfMeasure t-esc="rec.product_uom.name" />
            <quantity t-esc="rec.product_uom_qty" />
          </invoicedQuantity>
          <grossPrice>
            <amount t-esc="rec.price_unit" />
          </grossPrice>
          <netPrice>
            <t t-set="pricenet" t-value="rec.price_unit" />
            <t t-foreach="rec.tax_id" t-as="tc" >
              <t t-foreach="tc.tag_ids" t-as="tg" >
                <t t-if="tg.name != 'IEPS'" >
                  <t t-set="result" t-value="rec.price_unit" />
                  <t t-set="resultoper" t-value="result * (tc.amount / 100)" />
                  <t t-set="pricenet" t-value="pricenet + resultoper" />
                </t>
              </t>
            </t>
            <amount t-esc="pricenet"  />
          </netPrice>
            <t t-set="amount" t-value="0" />
            <t t-foreach="rec.tax_id" t-as="tac" >
              <t t-foreach="tac.tag_ids" t-as="tag" >
                <t t-if="record.partner_id.most_ieps == False">
                  <t t-if="tag.name != 'IEPS'">
                    <t t-set="result" t-value="rec.price_unit" />
                    <t t-set="resultoper" t-value="result * (tac.amount / 100)" />
                    <t t-set="amount" t-value="amount + resultoper" />
                    <tradeItemTaxInformation>
                      <taxTypeDescription>VAT</taxTypeDescription>
                      <tradeItemTaxAmount>
                        <taxPercentaje t-esc="tac.amount" />
                        <taxAmount t-esc="amount" />
                      </tradeItemTaxAmount>
                    </tradeItemTaxInformation>
                  </t>
                </t>
                <t t-else="">
                  <t t-if="tag.name != 'IEPS'">
                    <t t-set="result" t-value="rec.price_unit" />
                    <t t-set="resultoper" t-value="result * (tac.amount / 100)" />
                    <t t-set="amount" t-value="amount + resultoper" />
                    <tradeItemTaxInformation>
                      <taxTypeDescription>VAT</taxTypeDescription>
                      <tradeItemTaxAmount>
                        <taxPercentaje t-esc="tac.amount" />
                        <taxAmount t-esc="amount" />
                      </tradeItemTaxAmount>
                    </tradeItemTaxInformation>
                  </t>
                  <t t-else="">
                    <tradeItemTaxInformation>
                      <taxTypeDescription>IEPS</taxTypeDescription>
                      <tradeItemTaxAmount>
                        <taxAmount t-esc="tac.amount" />
                      </tradeItemTaxAmount>
                    </tradeItemTaxInformation>
                  </t>
                </t>
              </t>
            </t>
            <totalLineAmount>
              <netAmount>
                <amount t-esc="rec.price_unit * rec.product_uom_qty" />
              </netAmount>
            </totalLineAmount>
        </lineItem>
      </t>
      <fechaEntregaRequerida t-field="record.field_sales.date_of_deli" />
      <numeroOrden t-field="record.field_sales.number_order" />
      <numeroTienda t-field="record.partner_id.number_store" />
    </Documento>
  </Addenda>
</template>